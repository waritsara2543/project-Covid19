<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>COVID-19 </title>

  <link href="https://unpkg.com/bootstrap@4.4.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" rel="stylesheet">
    <link href="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.css" rel="stylesheet">

  <!-- Custom fonts for this template-->
  
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  

  <!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="index/images/icons/favicon.ico"/>
  <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="index/vendor/bootstrap/css/bootstrap.min.css">
  <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="index/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
  <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="index/vendor/animate/animate.css">
  <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="index/vendor/select2/select2.min.css">
  <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="index/vendor/perfect-scrollbar/perfect-scrollbar.css">
  <!--===============================================================================================-->


  <link href="https://unpkg.com/bootstrap@4.4.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" rel="stylesheet">
  <link href="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.css" rel="stylesheet">

</head>

<body id="page-top">
  
  <!-- Page Wrapper -->
  <div id="wrapper">

    <!-- Sidebar -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">
      

      <nav class="navbar navbar-expand-sm navbar-primary bg-light">
          <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">
        <div class="sidebar-brand-icon rotate-n-15">
          <i class="fas fa-laugh-wink "></i>
        </div>
        <div class="sidebar-brand-text mx-3 ">Covid-19 <sup></sup></div>
      </a>
        
        <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId" aria-controls="collapsibleNavId"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavId">
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="servey.html">Servey</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="about.html">About Me</a>
                </li>
                
            </ul>
        </div>
    </nav> 


    <div class="jumbotron">
        <h1 class="display-3"></h1>
        <p class="lead"></p>
        <div class="container">
            <h3>Confirmed cases (Equirectangular Projection)</h3>
            <div class="cases">
                <div class="map"></div>
                <div class="areaLegend"></div>
                <div class="plotLegend"></div>
            </div>
        </div>
    
        <script src="https://unpkg.com/jquery@3.4.1/dist/jquery.min.js"></script>
        <script src="https://unpkg.com/popper.js@1.16.0/dist/umd/popper.min.js"></script>
        <script src="https://unpkg.com/bootstrap@4.4.1/dist/js/bootstrap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/raphael@2.3.0/raphael.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery-mousewheel@3.1.13/jquery.mousewheel.min.js"></script>
        <!-- github.com/neveldo/jQuery-Mapael -->
        <script src="asset/mapael/jquery.mapael.js"></script>
        <script src="asset/mapael/maps/world_countries.min.js"></script>
        <script src="dataset.js"></script>
        <script>
            $(".cases").mapael({
                map: {
                    name : "world_countries",
              defaultArea: {
                attrs : {
                  stroke : "#fff", 
                  "stroke-width" : 1
                }
              }
                },
            legend: {
              area: {
                display : true,
                title :"Territory of total confirmed cases as of 1 April 2020", 
                slices : caseLegendAreaColors
              },
              plot: {
                display : true,
                title :"Region of total confirmed cases as of 1 April 2020", 
                slices : caseLegendPlotColors
              } 
            },
            plots: caseCityPlots,
            areas: caseCountryAreas
            });
        </script>
  
        </div>
        
    </div>

    </ul>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

        <!-- Topbar -->
        <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

          <!-- Sidebar Toggle (Topbar) -->
          <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
            <i class="fa fa-bars"></i>
          </button>

          

        </nav>
        <!-- End of Topbar -->

        <!-- Begin Page Content -->
        <div class="container-fluid mt-2">
            <div id="toolbar">
              <h3>COVID-19 Update (Live)</h3>
            </div>
            <table
                id="table"
                data-toolbar="#toolbar"
                data-search="true"
                data-show-toggle="true"
                data-show-columns="true"
                data-show-columns-toggle-all="true"
                data-show-export="true"
                data-sort-name="totalcases"
                data-sort-order="desc"
                data-show-pagination-switch="true"
                data-pagination="false"
                data-page-list="[10, 25, 50, 100, all]"
                data-show-footer="true">
            </table>
        </div>
    
        <script src="https://unpkg.com/jquery@3.4.1/dist/jquery.min.js"></script>
        <script src="https://unpkg.com/popper.js@1.16.0/dist/umd/popper.min.js"></script>
        <script src="https://unpkg.com/bootstrap@4.4.1/dist/js/bootstrap.min.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.js"></script>
        <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table-locale-all.min.js"></script>
        <script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script>
        <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/extensions/export/bootstrap-table-export.min.js"></script>
        <script>
            axios.get('https://api.covid19api.com/summary').then(function (response) {
                var rawData = myData(response.data.Countries);
                myTable(rawData);
            }).catch(function (error) {
                console.log(error);
            })
            
            function myData(data) {
                var list = [];
                data.forEach(function(item) {
                    list.push({
                        country: '<img src="img/flags/'+item.CountryCode.toLowerCase()+'.svg" width="36"> ' + item.Country, //github.com/rinvex/countries
                        newcases: item.NewConfirmed,
                        totalcases: item.TotalConfirmed,
                        newdeaths: item.NewDeaths,
                        totaldeaths: item.TotalDeaths,
                        newrecoveries: item.NewRecovered,
                        totalrecoveries: item.TotalRecovered,
                        lastupdate: new Date(item.Date).getDate()+'/'+new Date(item.Date).getMonth()+'/'+new Date(item.Date).getFullYear() //.toLocaleString()
                    });
                });
                return list;
            }
          
            function myTable(arr) {
                var myTable = $('#table').bootstrapTable({
                    height: 600,
                    locale: 'en_US',
                    columns: [
                        [
                            {field:'country', title:'Countries and territories', rowspan:2, align:'left', valign:'middle', footerFormatter:countFormatter}, 
                            {title:'Confirmed infections', colspan:2, align:'center', valign:'middle'}, 
                            {title:'Confirmed deaths', colspan:2, align:'center', valign:'middle'}, 
                            {title:'Reported recoveries', colspan:2, align:'center', valign:'middle'}, 
                            {field:'lastupdate', title:'Date', rowspan:2, align:'center', valign:'middle'}
                        ],
                        [
                            {field:'newcases', title:'New Cases',sortable:true, align:'right', formatter:numberFormatter, footerFormatter:totalFormatter},
                            {field:'totalcases', title:'Total Cases',sortable:true, align:'right', formatter:numberFormatter, footerFormatter:totalFormatter}, 
                            {field:'newdeaths', title:'New Deaths', sortable:true, align:'right', formatter:numberFormatter, footerFormatter:totalFormatter}, 
                            {field:'totaldeaths', title:'Total Deaths', sortable:true, align:'right', formatter:numberFormatter, footerFormatter:totalFormatter}, 
                            {field:'newrecoveries', title:'New Recovered', sortable:true, align:'right', formatter:numberFormatter, footerFormatter:totalFormatter}, 
                            {field:'totalrecoveries', title:'Total Recovered', sortable:true, align:'right', formatter:numberFormatter, footerFormatter: totalFormatter}
                        ]
                    ],
                    data: arr
                });
                return myTable;
            }
            
            function countFormatter(data) {
                return data.length
            }
            
            function numberFormatter(value, row){
                return value.toLocaleString('en-US');
            }
    
            function totalFormatter(data) {
                var field = this.field
                var total = data.map(function (row) {
                    return row[field]
                }).reduce(function (sum, i) {
                    return sum + i
                }, 0);
                return total.toLocaleString('en-US');
            }
        </script>
        <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

      <!-- Footer -->
      <footer class="sticky-footer bg-white">
        <div class="container my-auto">
          <div class="copyright text-center my-auto">
            <span>Copyright &copy; Your Website 2019</span>
          </div>
        </div>
      </footer>
      <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  

 

</body>

</html>
